---
title: Hexo 5.0.0 & official plugin hexo-cli 4.1.0 released
---

## Hexo 5.0.0

### Breaking Changes

- Hexo 5.0.0 requires Node.js 10.13.0 or higher [#4255](https://github.com/hexojs/hexo/pull/4255)
- `use_date_for_updated` (which is introduced in Hexo 4.0.0) is now deprecated. Use `updated_option` instead.
  - `use_date_for_updated: true`=> `updated_option: 'date'`
  - `use_date_for_updated: false`=> `updated_option: 'mtime'`
- Post's Front-Matter no longer supports `keywords` [#4174](https://github.com/hexojs/hexo/pull/4174)
- Lodash is removed from global variable [#4266](https://github.com/hexojs/hexo/pull/4266)
  - Theme developers who have been utilizing Lodash in their template could follow [You-Dont-Need-Lodash-Underscore](https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore) for migration.
- `permalink` in Post's Front-Matter now has the same behavior as Page's [#3464](https://github.com/hexojs/hexo/pull/3464) [#4359](https://github.com/hexojs/hexo/pull/4359)

### Features

#### Install themes through npm

- Ignore `hexo-theme-[theme's name]` when loading plugins (by [@SukkaW](https://github.com/SukkaW)) [#4111](https://github.com/hexojs/hexo/pull/4111)
- Support theme directories under `node_modules` (by [@SukkaW](https://github.com/SukkaW)) [#4112](https://github.com/hexojs/hexo/pull/4112)
  - `themes/[theme's name]` has higher priority than `node_modules/hexo-theme-[theme's name]`
- Support alternate theme config (`_config.[theme's name].yml`) (by [@SukkaW](https://github.com/SukkaW)) [#4120](https://github.com/hexojs/hexo/pull/4120)
  - Priority of deepmerge: `_config.yml`'s `theme_config` > `_config.[theme's name].yml` > `_config.yml` under theme directory

#### Support PrismJS syntax highlight

- Add prism highlight support (by [@SukkaW](https://github.com/SukkaW)) [#4119](https://github.com/hexojs/hexo/pull/4119)
  - [Instruction for theme developer](https://hexo.io/docs/syntax-highlight)

#### New Injector API

- New `Injector` API for inserting static html code snippet into generated html files (by [@SukkaW](https://github.com/SukkaW)) [#4049](https://github.com/hexojs/hexo/pull/4049)
  - [API Documents for `Injector`](https://hexo.io/api/injector)

#### Other features

- Add `updated_option` replacing `use_date_for_updated` (by [@SukkaW](https://github.com/SukkaW)) [#4278](https://github.com/hexojs/hexo/pull/4278)
- Add `unregister()` method for `Tag` API (by [@SukkaW](https://github.com/SukkaW)) [#4046](https://github.com/hexojs/hexo/pull/4046)
- `feed_tag()` helper is now compatible with `hexo-generator-feed` plugin (by [@curbengh](https://github.com/curbengh)) [#4029](https://github.com/hexojs/hexo/pull/4029)
- `tagcloud()` helper now supports 2 new options: `class` & `level` (by [@stevenjoezhang](https://github.com/stevenjoezhang)) [#4370](https://github.com/hexojs/hexo/pull/4370)
- `youtube` tag plugin supports playlist and `www.youtube-nocookie.com` (by [@SukkaW](https://github.com/SukkaW) & [@curbengh](https://github.com/curbengh)) [#4139](https://github.com/hexojs/hexo/pull/4139) [#4155](https://github.com/hexojs/hexo/pull/4155)
- Post permalink supports `:second` (by [@kkocdko](https://github.com/kkocdko)) [#4185](https://github.com/hexojs/hexo/pull/4185)
- Improved `post_link` error message for post not found (by [@stevenjoezhang](https://github.com/stevenjoezhang)) [#4426](https://github.com/hexojs/hexo/pull/4426)
- Improved tag plugin rendering error message (by [@SukkaW](https://github.com/SukkaW)) [#4420](https://github.com/hexojs/hexo/pull/4420)
- Skipping assets folder of unpublished posts (by [@DaemondShu](https://github.com/DaemondShu)) [#3489](https://github.com/hexojs/hexo/pull/3489)

### Bugs Fixed

- fix: adjacent tag plugins couldn't be rendered (by [@stevenjoezhang](https://github.com/stevenjoezhang) & [@SukkaW](https://github.com/SukkaW)) [#4161](https://github.com/hexojs/hexo/pull/4161) [#4358](https://github.com/hexojs/hexo/pull/4358)
- fix: rendering error caused by Nunjucks tag inside posts (by [@SukkaW](https://github.com/SukkaW)) [#4352](https://github.com/hexojs/hexo/pull/4352)
- fix: `code` tag plugin couldn't parse  'wrap' option (by [@curbengh](https://github.com/curbengh)) [#4391](https://github.com/hexojs/hexo/pull/4391)
- fix: posts without title should be accessible (by [@stevenjoezhang](https://github.com/stevenjoezhang)) [#4344](https://github.com/hexojs/hexo/pull/4344)
- fix(box): ignore `.git` and `node_modules` in the theme folder correctly (by [@jiangtj](https://github.com/jiangtj)) [#4306](https://github.com/hexojs/hexo/pull/4306)
- fix(#4236): don't create "/index" directories when `post_asset_folder` is enabled (by [@jiangtj](https://github.com/jiangtj)) [#4258](https://github.com/hexojs/hexo/pull/4258)
- fix(#4251): plugins with source map couldn't be loaded (by [@SukkaW](https://github.com/SukkaW)) [#4256](https://github.com/hexojs/hexo/pull/4256)
- fix: parsing code error in backticks (by [@seaoak](https://github.com/seaoak)) [#4229](https://github.com/hexojs/hexo/pull/4229)

### Performance

- Improve tag plugin rendering performance (by [@SukkaW](https://github.com/SukkaW)) [#4418](https://github.com/hexojs/hexo/pull/4418)
- Speed up `external_link` filter by optimizing RegExp (by [@SukkaW](https://github.com/SukkaW)) [#4134](https://github.com/hexojs/hexo/pull/4134) [#4436](https://github.com/hexojs/hexo/pull/4436)
- Avoid running irrelevant plugins when `hexo clean` (by [@curbengh](https://github.com/curbengh)) [#4386](https://github.com/hexojs/hexo/pull/4386)
- Avoid unnecessary check for `meta_generator`  (by [@SukkaW](https://github.com/SukkaW)) [#4208](https://github.com/hexojs/hexo/pull/4208)
- Lazy require dependencies  (by [@SukkaW](https://github.com/SukkaW)) [#4416](https://github.com/hexojs/hexo/pull/4416) [#4417](https://github.com/hexojs/hexo/pull/4417)
- Optimize `list_archives` helper by reducing calls to date.format()  (by [@dailyrandomphoto](https://github.com/dailyrandomphoto)) [#4011](https://github.com/hexojs/hexo/pull/4011)
- Avoid moment.locale lookup for the wrong names repeatedly  (by [@dailyrandomphoto](https://github.com/dailyrandomphoto)) [#4007](https://github.com/hexojs/hexo/pull/4007)

### Housekeeping

#### Dependencies

- chore(deps): update hexo-cli from 3.0.0 to 4.0.0
- chore(deps): update hexo-front-matter from 1.0.0 to 2.0.0
- chore(deps): update hexo-util from 1.9.0 to 2.2.0
- chore(deps): update hexo-log from 1.0.0 to 2.0.0
- chore(deps): bump hexo-fs from 2.0.0 to 3.0.1
- chore(deps): bump warehouse from 3.0.2 to 4.0.0
- chore(deps): bump chalk from 3.0.0 to 4.0.0
- chore(deps-dev): bump hexo-renderer-marked from 2.0.0 to 3.0.0
- chore(deps-dev): bump mocha from 6.2.2 to 8.0.1
- chore(deps-dev): bump eslint from 6.8.0 to 7.0.0
- chore(deps-dev): bump lint-staged from 9.5.0 to 10.2.0
- chore(deps-dev): bump sinon from 7.5.0 to 9.0.2
- chore(deps-dev): bump husky from 3.1.0 to 4.2.5
- chore(deps-dev): bump nyc from 14.1.1 to 15.0.0

#### Test

- test: run tests in parallel  (by [@curbengh](https://github.com/curbengh)) [#4374](https://github.com/hexojs/hexo/pull/4374)
- test(#4087): add related cases  (by [@SukkaW](https://github.com/SukkaW)) [#4364](https://github.com/hexojs/hexo/pull/4364)
- test(#4385): no double escape in code block  (by [@SukkaW](https://github.com/SukkaW)) [#4395](https://github.com/hexojs/hexo/pull/4395)
- test(box): fix test cases for macOS  (by [@stevenjoezhang](https://github.com/stevenjoezhang)) [#4269](https://github.com/hexojs/hexo/pull/4269)
- test: improve test coverage  (by [@SukkaW](https://github.com/SukkaW)) [#4014](https://github.com/hexojs/hexo/pull/4014) [#4270](https://github.com/hexojs/hexo/pull/4270) [#4421](https://github.com/hexojs/hexo/pull/4421) [#4422](https://github.com/hexojs/hexo/pull/4422)
- test(load-database): fix EPERM error in windows  (by [@curbengh](https://github.com/curbengh)) [#4069](https://github.com/hexojs/hexo/pull/4069)
- test: useful sinon.assert  (by [@segayuu](https://github.com/segayuu)) [#4164](https://github.com/hexojs/hexo/pull/4164)
- test: replace from rewire to sinon.stub()  (by [@segayuu](https://github.com/segayuu)) [#4157](https://github.com/hexojs/hexo/pull/4157)

#### Misc

- Add benchmark script (by [@Himself65](https://github.com/Himself65)) [#4405](https://github.com/hexojs/hexo/pull/4405)
- Add GitHub Actions to run linter (by [@Himself65](https://github.com/Himself65)) [#4143](https://github.com/hexojs/hexo/pull/4143)
- Move coveralls from travis to github actions (by [@segayuu](https://github.com/segayuu)) [#4326](https://github.com/hexojs/hexo/pull/4326)
- Drop Appveyor (by [@SukkaW](https://github.com/SukkaW)) [#4402](https://github.com/hexojs/hexo/pull/4402)

---


## hexo-cli 4.1.0

### Breaking change

- Requires Node 10.13+ [#195](https://github.com/hexojs/hexo-cli/pull/195)

### Fixes

- More detailed information for `hexo not found` [@stevenjoezhang](https://github.com/stevenjoezhang) [#206](https://github.com/hexojs/hexo-cli/pull/206)
  * When `hexo` binary could not be located, we usually recommend removing the node_modules folder and reinstall the packages.
  * `$ rm -rf node_modules && npm install --force`
- fix(init): fix hexo init error with a number target project name [@brelian](https://github.com/brelian) [#200](https://github.com/hexojs/hexo-cli/pull/200)
  * It's now possible to `hexo init 888`
- fix(init): shallow clone and reduce verbosity [@curbengh](https://github.com/curbengh) [#129](https://github.com/hexojs/hexo-cli/pull/129)
  * This should result in faster `hexo init` due to less file download.
  * `hexo init` operates by git clone [hexo-starter](https://github.com/hexojs/hexo-starter/). With this change, git now just clone recent commit history (shallow clone), instead of full history.
  * `hexo init` is also more _quiet_ while still show error if encountered.
- Improve Node 14 compatibility [#185](https://github.com/hexojs/hexo-cli/pull/185) [#190](https://github.com/hexojs/hexo-cli/pull/190)


### Refactor

- refactor: Class syntax & Destructuring assignment [@SukkaW](https://github.com/SukkaW) [#191](https://github.com/hexojs/hexo-cli/pull/191)
- refactor: destructure hexo-util [@curbengh](https://github.com/curbengh) [#141](https://github.com/hexojs/hexo-cli/pull/141)

### Housekeeping

- chore: update hexo-starter [@curbengh](https://github.com/curbengh) [#147](https://github.com/hexojs/hexo-cli/pull/147)
- chore: add release-drafter [@YoshinoriN](https://github.com/YoshinoriN) [#165](https://github.com/hexojs/hexo-cli/pull/165)
- ci: drop Node 8 [@curbengh](https://github.com/curbengh) [#185](https://github.com/hexojs/hexo-cli/pull/185)
- ci: add GitHub Actions [@curbengh](https://github.com/curbengh) [#223](https://github.com/hexojs/hexo-cli/pull/223)
- chore(deps-dev): bump hexo-renderer-marked from 2.0.0 to 3.0.0 [#216](https://github.com/hexojs/hexo-cli/pull/216)
- chore(deps-dev): bump mocha from 6.2.2 to 8.0.1 [#172](https://github.com/hexojs/hexo-cli/pull/172) [#203](https://github.com/hexojs/hexo-cli/pull/203) [#209](https://github.com/hexojs/hexo-cli/pull/209)
  - test(mocha): use yml format [@curbengh](https://github.com/curbengh) [#192](https://github.com/hexojs/hexo-cli/pull/192)
- chore(deps-dev): bump eslint from 6.8.0 to 7.0.0 [#197](https://github.com/hexojs/hexo-cli/pull/197)
- chore(deps-dev): bump rewire from 4.0.1 to 5.0.0 [#170](https://github.com/hexojs/hexo-cli/pull/170)
- chore(deps): bump chalk from 2.4.2 to 4.0.0 [#131](https://github.com/hexojs/hexo-cli/pull/131) [#178](https://github.com/hexojs/hexo-cli/pull/178)
- chore(deps-dev): bump sinon from 7.5.0 to 9.0.2 [#151](https://github.com/hexojs/hexo-cli/pull/151) [#180](https://github.com/hexojs/hexo-cli/pull/180)
- chore(deps-dev): bump nyc from 14.1.1 to 15.0.0 [#149](https://github.com/hexojs/hexo-cli/pull/149)
- chore(deps-dev): bump eslint-config-hexo from 3.0.0 to 4.1.0 [#139](https://github.com/hexojs/hexo-cli/pull/139) [#143](https://github.com/hexojs/hexo-cli/pull/143)
